import React, { useContext, useEffect, useState } from 'react';
import styled from "styled-components";
import '../../App.css';
import media from '../../styles/media';
import { fontSizes } from "../../styles/FontSizes";
import DegreeGood from './DangerDegree/DegreeGood';
import DegreeSoso from './DangerDegree/DegreeSoso';
import DegreeWarning from './DangerDegree/DegreeWarning';

export default function PostAnalysisSection1() {
  const [isAnalysis, setIsAnalysis] = useState(false);  // 분석 여부
  const [postCount, setPostCount] = useState(112);   // 게시물 개수
  const [analysisCount, setAnalysisCount] = useState(12);   // 개인정보 포함된 게시물 개수
  const [dangerDegree, setDangerDegree] = useState(1) ;  // 1:낮음, 2:보통, 3:높음  
  const [isPost, setIsPost] = useState(false);  // 게시물 존재 여부

  return (
    <Main>
      <TitleContainer>
        <AccountContainer>
          <span>분석한 계정</span>
          <span className='instaIcon'>
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
            <rect width="20" height="20" fill="white"/>
            <path d="M10.0026 1.6665C6.52347 1.6665 5.50597 1.67009 5.30818 1.68651C4.59422 1.74587 4.14994 1.85831 3.66593 2.09936C3.29292 2.28463 2.99875 2.49939 2.70842 2.80045C2.17967 3.34947 1.85922 4.02491 1.74321 4.8278C1.68681 5.21757 1.67041 5.29707 1.66707 7.28801C1.66579 7.95165 1.66707 8.82506 1.66707 9.99657C1.66707 13.4738 1.67092 14.4905 1.68758 14.688C1.74526 15.3829 1.85422 15.8201 2.08494 16.2984C2.52589 17.2138 3.36804 17.9011 4.36016 18.1575C4.70368 18.246 5.0831 18.2947 5.57019 18.3178C5.77656 18.3268 7.88001 18.3332 9.98474 18.3332C12.0895 18.3332 14.1942 18.3306 14.3954 18.3203C14.9594 18.2938 15.2869 18.2498 15.6491 18.1562C16.141 18.03 16.5995 17.798 16.9924 17.4762C17.3854 17.1544 17.7034 16.7507 17.9243 16.2933C18.1505 15.8265 18.2652 15.3727 18.3171 14.714C18.3284 14.5704 18.3332 12.2809 18.3332 9.99439C18.3332 7.70753 18.328 5.42221 18.3168 5.2786C18.2642 4.60932 18.1495 4.15928 17.9159 3.6836C17.7243 3.29421 17.5115 3.00341 17.2026 2.70608C16.6514 2.17937 15.9772 1.85883 15.1736 1.74292C14.7844 1.68663 14.7068 1.66997 12.7149 1.6665H10.0026Z" fill="url(#paint0_radial_421_2634)"/>
            <path d="M10.0026 1.6665C6.52347 1.6665 5.50597 1.67009 5.30818 1.68651C4.59422 1.74587 4.14994 1.85831 3.66593 2.09936C3.29292 2.28463 2.99875 2.49939 2.70842 2.80045C2.17967 3.34947 1.85922 4.02491 1.74321 4.8278C1.68681 5.21757 1.67041 5.29707 1.66707 7.28801C1.66579 7.95165 1.66707 8.82506 1.66707 9.99657C1.66707 13.4738 1.67092 14.4905 1.68758 14.688C1.74526 15.3829 1.85422 15.8201 2.08494 16.2984C2.52589 17.2138 3.36804 17.9011 4.36016 18.1575C4.70368 18.246 5.0831 18.2947 5.57019 18.3178C5.77656 18.3268 7.88001 18.3332 9.98474 18.3332C12.0895 18.3332 14.1942 18.3306 14.3954 18.3203C14.9594 18.2938 15.2869 18.2498 15.6491 18.1562C16.141 18.03 16.5995 17.798 16.9924 17.4762C17.3854 17.1544 17.7034 16.7507 17.9243 16.2933C18.1505 15.8265 18.2652 15.3727 18.3171 14.714C18.3284 14.5704 18.3332 12.2809 18.3332 9.99439C18.3332 7.70753 18.328 5.42221 18.3168 5.2786C18.2642 4.60932 18.1495 4.15928 17.9159 3.6836C17.7243 3.29421 17.5115 3.00341 17.2026 2.70608C16.6514 2.17937 15.9772 1.85883 15.1736 1.74292C14.7844 1.68663 14.7068 1.66997 12.7149 1.6665H10.0026Z" fill="url(#paint1_radial_421_2634)"/>
            <path d="M9.99878 3.84668C8.32781 3.84668 8.1181 3.85399 7.46182 3.88386C6.80681 3.91386 6.35972 4.01759 5.96851 4.16978C5.56384 4.32698 5.22057 4.53725 4.87859 4.87946C4.53634 5.22154 4.32613 5.5649 4.16846 5.96955C4.01593 6.36099 3.9121 6.80834 3.88262 7.46327C3.85339 8.11973 3.8457 8.32962 3.8457 10.001C3.8457 11.6725 3.85314 11.8816 3.88288 12.5381C3.913 13.1932 4.0167 13.6405 4.16872 14.0318C4.326 14.4365 4.53621 14.7799 4.87833 15.122C5.22019 15.4643 5.56346 15.6751 5.96787 15.8323C6.35933 15.9845 6.80656 16.0882 7.46143 16.1182C8.11772 16.1481 8.3273 16.1554 9.99814 16.1554C11.6692 16.1554 11.8783 16.1481 12.5346 16.1182C13.1896 16.0882 13.6372 15.9845 14.0287 15.8323C14.4332 15.6751 14.776 15.4643 15.1178 15.122C15.4601 14.7799 15.6703 14.4365 15.8279 14.0319C15.9792 13.6405 16.083 13.1931 16.1138 12.5382C16.1433 11.8817 16.151 11.6725 16.151 10.001C16.151 8.32962 16.1433 8.11986 16.1138 7.4634C16.083 6.80821 15.9792 6.36099 15.8279 5.96968C15.6703 5.5649 15.4601 5.22154 15.1178 4.87946C14.7756 4.53712 14.4333 4.32685 14.0283 4.16978C13.636 4.01759 13.1887 3.91386 12.5337 3.88386C11.8774 3.85399 11.6685 3.84668 9.99698 3.84668H9.99878ZM9.44683 4.95575C9.61064 4.95549 9.79343 4.95575 9.99878 4.95575C11.6415 4.95575 11.8363 4.96165 12.485 4.99114C13.0849 5.01857 13.4104 5.11884 13.6273 5.20308C13.9145 5.31462 14.1192 5.44797 14.3344 5.66337C14.5497 5.87877 14.683 6.08392 14.7948 6.37112C14.879 6.58781 14.9794 6.91348 15.0067 7.51353C15.0362 8.1623 15.0426 8.35719 15.0426 9.99963C15.0426 11.6421 15.0362 11.837 15.0067 12.4857C14.9792 13.0858 14.879 13.4115 14.7948 13.6281C14.6833 13.9154 14.5497 14.1199 14.3344 14.3351C14.119 14.5505 13.9146 14.6839 13.6273 14.7954C13.4107 14.88 13.0849 14.9801 12.485 15.0075C11.8364 15.037 11.6415 15.0434 9.99878 15.0434C8.35588 15.0434 8.16117 15.037 7.51258 15.0075C6.91269 14.9798 6.58711 14.8795 6.3701 14.7953C6.08297 14.6837 5.87789 14.5504 5.66254 14.335C5.4472 14.1196 5.31389 13.915 5.20211 13.6276C5.1179 13.4109 5.01753 13.0853 4.99023 12.4852C4.96075 11.8365 4.95485 11.6416 4.95485 9.9981C4.95485 8.35462 4.96075 8.16076 4.99023 7.51199C5.01766 6.91194 5.1179 6.58627 5.20211 6.36933C5.31363 6.08212 5.4472 5.87698 5.66254 5.66158C5.87789 5.44617 6.08297 5.31283 6.3701 5.20102C6.58698 5.1164 6.91269 5.01639 7.51258 4.98883C8.08016 4.96318 8.30012 4.95549 9.44683 4.95421V4.95575ZM13.283 5.97763C13.137 5.97763 12.9942 6.02095 12.8728 6.10211C12.7514 6.18327 12.6568 6.29863 12.6009 6.43359C12.545 6.56855 12.5304 6.71706 12.5589 6.86033C12.5874 7.00359 12.6578 7.13518 12.761 7.23846C12.8643 7.34173 12.9959 7.41205 13.1391 7.44052C13.2824 7.46898 13.4308 7.45432 13.5658 7.39839C13.7007 7.34245 13.816 7.24775 13.897 7.12627C13.9781 7.00478 14.0214 6.86197 14.0214 6.7159C14.0214 6.30817 13.6906 5.97737 13.283 5.97737V5.97763ZM9.99878 6.84052C8.25385 6.84052 6.83911 8.25564 6.83911 10.001C6.83911 11.7464 8.25385 13.1609 9.99878 13.1609C11.7437 13.1609 13.1581 11.7464 13.1581 10.001C13.1581 8.25564 11.7436 6.84052 9.99865 6.84052H9.99878ZM9.99878 7.94959C11.1314 7.94959 12.0497 8.868 12.0497 10.001C12.0497 11.134 11.1314 12.0525 9.99878 12.0525C8.86604 12.0525 7.94788 11.134 7.94788 10.001C7.94788 8.868 8.86604 7.94959 9.99878 7.94959Z" fill="white"/>
            <defs>
            <radialGradient id="paint0_radial_421_2634" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(6.09361 19.6169) rotate(-90) scale(16.5179 15.3629)">
            <stop stopColor="#FFDD55"/>
            <stop offset="0.1" stopColor="#FFDD55"/>
            <stop offset="0.5" stopColor="#FF543E"/>
            <stop offset="1" stopColor="#C837AB"/>
            </radialGradient>
            <radialGradient id="paint1_radial_421_2634" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(-1.12525 2.86714) rotate(78.6806) scale(7.38357 30.4354)">
            <stop stopColor="#3771C8"/>
            <stop offset="0.128" stopColor="#3771C8"/>
            <stop offset="1" stopColor="#6600FF" stopOpacity="0"/>
            </radialGradient>
            </defs>
            </svg>
          </span>
          <span>ID</span>
        </AccountContainer>
        <InfoContainer $count={analysisCount}>
          {isPost ? 
            <span>전체 게시물 {postCount}개 중<br />
            개인정보가 포함된 게시물이 <span className='analysisCount'>{analysisCount}개</span> 발견되었어요.</span>
          : 
            <span>해당 계정에<br />게시물이 존재하지 않아요.</span>
          }
        </InfoContainer>
      </TitleContainer>
      <DangerInformContainer>
        {isPost && (
          <>
            {dangerDegree === 1 && <DegreeGood />}
            {dangerDegree === 2 && <DegreeSoso />}
            {dangerDegree === 3 && <DegreeWarning />}
          </>
        )}
      </DangerInformContainer>
    </Main>
  );
}

const Main = styled.div`
  display: flex;
  justify-content: space-between;
  padding-top: 7.407vh;
  padding-bottom: 7.407vh;

  ${media.small`
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    padding-top: 5.556vh;
    padding-bottom: 5.556vh;
  `}
`;

const TitleContainer = styled.div`
  
`;

const AccountContainer = styled.div`
  display: flex;
  align-items: center;
  margin-bottom: 16px;

  span {
    ${fontSizes.body2Medium};
    color: ${(props) => props.theme.Gray700};
  }

  .instaIcon {
    padding-left: 16px;
    padding-right: 8px;
  }
`;

const InfoContainer = styled.div`
  ${fontSizes.titleHead2bold};
  color: ${(props) => props.theme.Gray700};

  .analysisCount {
    color: ${(props) => props.$count > 0 ? props.theme.Warning : props.theme.Gray700};
  }
`;

const DangerInformContainer = styled.div`
  display: flex;
  align-items: center;
  ${media.small`
    margin-top: 16px;
  `}
`;
